@page "/"
@using BusinessLogic
@using MudBlazor.Extensions
@inject IDialogService DialogService
@inject NavigationManager NavigationManager


<MudItem>
    <MudButton @onclick="@OnGetNextClick" Variant="Variant.Filled" Color="Color.Primary">Get Request</MudButton>
</MudItem>

<br />
<br />

@if (_request != null)
{
    <RequestView @bind-Request="@_request" @ref="_rfsview" />
}


@*<MudGrid>
        <MudItem xs="6" sm="6" md="6">
            <MudCard>
                <MudCardHeader Style="height: 22px; font-weight: bolder">
                    <CardHeaderContent>
                        <MudText>Request</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudGrid>
                        <MudItem xs="4" md="4">
                            <MudField Label="Requested Service" Variant="Variant.Outlined">@_request.RequestedService.ToDescriptionString()</MudField>
                        </MudItem>
                        <MudItem xs="4" md="4">
                            <MudTextField @bind-Value="_request.Id" Label="Request ID" Variant="Variant.Outlined" ReadOnly="true" />
                        </MudItem>
                        <MudItem xs="4" md="4">
                            <MudField Label="Time Received" Variant="Variant.Outlined">@_request.TimeReceived.ToString("MM/dd/yyyy h:mm tt")</MudField>
                        </MudItem>
                        <MudItem>
                            <MudButton Variant="Variant.Filled" Color="Color.Success">Approve</MudButton>
                        </MudItem>
                        <MudItem>
                            <MudButton Variant="Variant.Filled" Color="Color.Error">Deny</MudButton>
                        </MudItem>
                        <MudItem>
                            <MudButton @onclick="@StateHasChanged" Variant="Variant.Filled" Color="Color.Error">Update</MudButton>
                        </MudItem>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="6" sm="6" md="6">
            <MudCard>
                <MudCardHeader Style="height: 22px; font-weight: bolder">
                    <CardHeaderContent>
                        <MudText>Patient</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudGrid>
                        <MudItem xs="4" md="4">
                            <MudTextField @bind-Value="_request.MemberId" Label="Member ID" Variant="Variant.Outlined" ReadOnly="true" />
                        </MudItem>
                        <MudItem xs="4" md="4">
                            <MudTextField @bind-Value="_request.PatientFirstName" Label="First Name" Variant="Variant.Outlined" ReadOnly="true" />
                        </MudItem>
                        <MudItem xs="4" md="4">
                            <MudTextField @bind-Value="_request.PatientLastName" Label="Last Name" Variant="Variant.Outlined" ReadOnly="true" />
                        </MudItem>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="6" sm="6" md="6">
            <MudCard>
                <MudCardHeader Style="height: 22px; font-weight: bolder">
                    <CardHeaderContent>
                        <MudText>Provider</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudGrid>
                        <MudItem xs="4" md="4">
                            <MudTextField @bind-Value="_request.ProviderFirstName" Label="First Name" Variant="Variant.Outlined" ReadOnly="true" />
                        </MudItem>
                        <MudItem xs="4" md="4">
                            <MudTextField @bind-Value="_request.ProviderLastName" Label="Last Name" Variant="Variant.Outlined" ReadOnly="true" />
                        </MudItem>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>*@

@{
    StartListenersAsync();
    GetUserDetailsAsync();
}

@*@code {

        public RequestForService Request = new()
        {
            Id = "123ABC"
                                                                                              ,
            TimeReceived = DateTime.Now.AddDays(-1)
                                                                                              ,
            RequestedService = RequestedService.LongTermCare
                                                                                              ,
            PatientFirstName = "Johnny"
                                                                                              ,
            PatientLastName = "Walker"
                                                                                              ,
            MemberId = "1236"
                                                                                              ,
            ProviderFirstName = "Strange"
                                                                                              ,
            ProviderLastName = "Love"
        };
    }*@
